<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, Helvetica, sans-serif;
        }

        /* Game Design:
        1. One big board from which the game is to be played
        2. 9 boxes separated by grids (grids: amounts up to 4 including border of main board both horizontally and vertically)
        */

        section {
            display: flex;
            flex-flow: row wrap;
        }

        #main-menu {
            height: calc((96px * 3) + (8px * 4));
            width: calc(((96px * 3) + (8px * 4)) / 2);
            background-color: rgb(109, 180, 204);
            display: flex;
            flex-flow: column wrap;
            justify-content: space-evenly;
            align-items: center;
        }

        #main-menu h4,
        #main-menu p {
            text-align: center;
        }

        .menu-btn,
        #got-it,
        #roll-dice,
        #dice-next {
            height: 32px;
            width: 96px;
        }

        #main-board {
            height: calc((96px * 3) + (8px * 4));
            width: calc((96px * 3) + (8px * 4));
            background-color: lightblue;
            display: flex;
            flex-flow: column wrap;
            justify-content: space-evenly;
            align-items: center;
        }

        .game-btn {
            height: 96px;
            width: 96px;
            border: none;
            border-radius: 2px;
        }
    </style>
    <title>TicTacToe</title>
</head>

<body>
    <!-- HTML -->
    <section>
        <div id="main-menu">
            <h4>GAME MODE:</h2>
            <button class="menu-btn" id="one-player-btn" onclick="onePlayer()">1 PLAYER</button>
            <button class="menu-btn" id="two-player-btn" onclick="twoPlayer()">2 PLAYER</button>
            <h4 id="ready-el">READY?</h4>
            <button class="menu-btn" onclick="startGame()">START GAME</button>
            <!-- elements above will be replaced by new elements (but brought back when game is restarted) at JAVASCRIPT -->
        </div>
        <div id="main-board">
            <button class="game-btn" id="btn-one"></button>
            <button class="game-btn" id="btn-two"></button>
            <button class="game-btn" id="btn-three"></button>
            <button class="game-btn" id="btn-four"></button>
            <button class="game-btn" id="btn-five"></button>
            <button class="game-btn" id="btn-six"></button>
            <button class="game-btn" id="btn-seven"></button>
            <button class="game-btn" id="btn-eight"></button>
            <button class="game-btn" id="btn-nine"></button>
        </div>
    </section>

    <script>
        // JAVASCRIPT
        // GAME FLOW: single player or multiplayer selection; dice; X or O selection;

        // GAME SECTION: game mode selection
        // 
        let gameOngoing = false // var:game state
        const gOMessage = "Game is ongoing!" // var:message for when gameOngoing is true
        let gMSelection = false // var:selection state
        const gMSMessage = "Choosing game mode..." // var:message for when choosing game mode
        let gameMode = "" // var:game mode
        const gMMessage = "Game mode is" + " " // var:message when logging out completion in game mode selection
        const onePlayerBtn = document.querySelector("#one-player-btn")
        const twoPlayerBtn = document.querySelector("#two-player-btn")
        const readyEl = document.querySelector("#ready-el")
        // 
        // functions for game mode selection
        function onePlayer() {
            // log functionality and prevent selection if game is ongoing
            console.log(gMSMessage)
            if (gameOngoing === true) {
                console.log(gOMessage)
            } else {
                // make gameMode to 1 player as chosen
                gameMode = "1 Player"
                // display selection on clicked button and remove the other if any
                onePlayerBtn.style = "background-color: red;"
                twoPlayerBtn.style = ""
                // make game mode selection true and log success
                gMSelection = true
                console.log(gMMessage + gameMode)
                // make readyEl to "Ready?" if it has been changed
                readyEl.textContent = "READY?"
            }
        }
        function twoPlayer() {
            console.log(gMSMessage)
            if (gameOngoing === true) {
                console.log(gOMessage)
            } else {
                gameMode = "2 Player"
                onePlayerBtn.style = ""
                twoPlayerBtn.style = "background-color: red;"
                gMSelection = true
                console.log(gMMessage + gameMode)
                readyEl.textContent = "READY?"
            }
        }

        // GAME SECTION: game initiation (with conditions)
        //
        function startGame() {
            // log functionality
            console.log("Starting game...")
            // conditional for when game is ongoing
            if (gameOngoing === true) {
                console.log(gOMessage)
            } else if (gameOngoing === false && gMSelection === false) {
                console.log("You need to select a game mode!")
                readyEl.textContent = "CHOOSE GAME MODE!"
            } else if (gameOngoing === false && gMSelection === true) {
                // log success
                console.log("Game started!")
                // make gameOngoing true to prevent restarting game
                gameOngoing = true
                // conditional for starting what game mode
                if (gameMode === "1 Player") {
                    console.log("Sorry, mode in development...")
                } else if (gameMode === "2 Player") {
                    twoPlay()
                }
            }
        }

        // GAME SECTION: 2 Player
        // NOTE: From here, game has started. 2-Player mode will be prioritized because the single-player mode requires an AI @_@
        // new elements will be needed because the menu on the left will also be used for player selection (who rolls the dice) and who chooses X or O
        // game will notify the participants to decide between themselves who is player 1 and player 2
        // player 1 will always be the dice roller
        // the dice rolled will decide who comes first and last (1 for first and 2 for last regardless of player number)
        // the one who will not have his first turn will decide whether he is X or O
        // game commences
        // game ends and var:gameOngoing = false and gMSelection = false
        // 
        const mainMenu = document.querySelector("#main-menu")
        // 
        // function that removes div#main-menu child elements
        function removeMM() {
            while (mainMenu.hasChildNodes()) {
                mainMenu.removeChild(mainMenu.firstChild)
            }
        }
        function twoPlay() {
            // remove all children of div#main-menu for the choosing of who is player 1
            removeMM()
            // create new element to notify players of player selection
            mainMenu.innerHTML += "<h4>ATTENTION!</h4><p>Player 1 gets to roll the dice which decides which player goes first. Player 2 gets to choose whether to play X or O.</p><button id='got-it' onclick='gotIt()'>GOT IT!</button>"
        }
        function gotIt() {
            removeMM()
            // have player 1 roll dice using separate function
            mainMenu.innerHTML += "<h4>PLAYER 1, ROLL THE DICE.</h4><button id='roll-dice' onclick='rollDice()'>ROLL DICE</button><p id='player-turn-display'>You will be...</p><button id='dice-next' onclick='diceNext()'>NEXT</button>"
            // have player 2 choose whether X or O using separate function
        }

        // GAME SECTION: General game progression: DICE and X/O
        // 
        let pOTurn = "" // var:player 1's turn
        let PTTurn = "" // var:player 2's turn
        let pTDecision = false //var:whether players have a decided play-turn
        // 
        function rollDice() {
            // log functionality, and conditional to prevent rolling more than twice
            console.log("Rolling the dice...")
            if (pTDecision === true) {
                console.log("The dice has already been rolled. You are " + pOTurn + "to play.")
            } else if (pTDecision === false) {
                console.log("Player 1 has rolled the dice.")
                // remove color if any to btn#roll-dice
                document.querySelector("#roll-dice").style = ""
                // dice
                let diceValue = Math.floor(Math.random() * 2) + 1
                // conditional for whether first or second
                if (diceValue === 1) {
                    pOTurn = "first"
                    PTTurn = "second"
                } else if (diceValue === 2) {
                    pOTurn = "second"
                    PTTurn = "first"
                }
                // make pTDecision true
                pTDecision = true
                // log order when playing and also display
                console.log("Dice value is: " + diceValue)
                pTDisplay = document.querySelector("#player-turn-display")
                pTDisplay.append(" " + pOTurn+ " to play!")
            }
        }
        function diceNext() {
            if (pTDecision === false) {
                // player one hasn't rolled dice, log and make btn#roll-dice red for attention
                console.log("Please roll the dice first!")
                document.querySelector("#roll-dice").style = "background-color: red;"
            } else if (pTDecision === true) {
                removeMM()
                // HERE, WE STOPPED
            }
        }
        function chooseXO() {
            console.log("You have chosen: ???")
        }

    </script>
</body>

</html>